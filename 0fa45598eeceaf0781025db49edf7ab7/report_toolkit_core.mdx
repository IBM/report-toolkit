---
title: "@report-toolkit/core"
---

[report-toolkit API](../home.mdx) › [Globals](../home.mdx) › [@report-toolkit/core](report_toolkit_core.mdx)

## Index

### References

- [builtinTransformerIds](report_toolkit_core#builtintransformerids)
- [compatibleTransforms](report_toolkit_core#compatibletransforms)
- [deregisterPlugins](report_toolkit_core#deregisterplugins)
- [isPluginRegistered](report_toolkit_core#ispluginregistered)
- [registeredRuleDefinitions](report_toolkit_core#registeredruledefinitions)

### External modules

- [observable](report_toolkit_core.observable)

### Functions

- [diff](report_toolkit_core#diff)
- [inspect](report_toolkit_core#inspect)
- [loadConfig](report_toolkit_core#loadconfig)
- [toReportFromObject](report_toolkit_core#toreportfromobject)
- [transform](report_toolkit_core#transform)
- [use](report_toolkit_core#use)

## References

### builtinTransformerIds

• **builtinTransformerIds**:

___

### compatibleTransforms

• **compatibleTransforms**:

___

### deregisterPlugins

• **deregisterPlugins**:

___

### isPluginRegistered

• **isPluginRegistered**:

___

### registeredRuleDefinitions

• **registeredRuleDefinitions**:

## Functions

### diff

▸ **diff**(`report1`: [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) | [Report](../classes/report_toolkit_common.report.report), `report2`: [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) | [Report](../classes/report_toolkit_common.report.report), `opts?`: Partial‹[DiffOptions](report_toolkit_core.observable#diffoptions)›): *Promise‹[DiffResult](report_toolkit_core.observable#diffresult)[]›*

Returns the difference between two reports.

Example:

```js
const {diff} = require('@report-toolkit/core');

const report1 = process.report.getReport();
const report2 = process.report.getReport();
const results = await diff(report1, report2, {
  filterProperties: ['header', 'javascriptStack', 'nativeStack'],
  showSecretsUnsafe: false
});
results.forEach(({op, path, newValue, oldValue}) => {
  console.log(`[${op}] <${path}> ${oldValue} => ${newValue}`);
});
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`report1` | [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) &#124; [Report](../classes/report_toolkit_common.report.report) | First report to diff |
`report2` | [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) &#124; [Report](../classes/report_toolkit_common.report.report) | Second report to diff |
`opts?` | Partial‹[DiffOptions](report_toolkit_core.observable#diffoptions)› | - |

**Returns:** *Promise‹[DiffResult](report_toolkit_core.observable#diffresult)[]›*

Array of results, one per difference

___

### inspect

▸ **inspect**(`reports`: [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) | [Report](../classes/report_toolkit_common.report.report), `opts?`: Partial‹[InspectOptions](report_toolkit_core.observable#inspectoptions)›): *Promise‹[Message](../classes/report_toolkit_inspector.message.message)[]›*

Inspect one or more reports, running rules against each.  Resolves with an array of zero or more [Messages](../classes/report_toolkit_inspector.message.message.mdx).

Example:

```js
const {inspect} = require('@report-toolkit/core');

const report = process.report.getReport();
const results = await inspect(report, {
  severity: 'info',
  sort: true,
  sortDirection: 'asc',
  sortField: 'header.dumpEventTimestamp',
  showSecretsUnsafe: false,
  ruleConfig: {
    'long-timeout': {
      timeout: '2s'
    }
  }
});
results.forEach(({message, filename}) => {
  console.log(`${filename}: ${message}`);
});
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`reports` | [DiagnosticReport](../interfaces/common_diagnostic_report_d_.diagnosticreport) &#124; [Report](../classes/report_toolkit_common.report.report) | One or more reports |
`opts?` | Partial‹[InspectOptions](report_toolkit_core.observable#inspectoptions)› | - |

**Returns:** *Promise‹[Message](../classes/report_toolkit_inspector.message.message)[]›*

___

### loadConfig

▸ **loadConfig**(`config`: any): *Promise‹any›*

Resolves with a normalized config object from a raw config object.

Example:

```js
const {loadConfig} = require('@report-toolkit/core');

// or require('./path/to/.rtkrc.js')
const rawConfig = [
  'report-toolkit:recommended',
  {
    rules: {
      'long-timeout': {
        timeout: '2s'
      }
    }
  }
];
// `normalizedConfig` contains contents of "recommended" settings,
// with our override of custom rule config
const normalizedConfig = await loadConfig(rawConfig);
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`config` | any | Raw config object |

**Returns:** *Promise‹any›*

A normalized config object

___

### toReportFromObject

▸ **toReportFromObject**(`value`: any, `opts?`: Partial‹[ToReportFromObjectOptions](report_toolkit_core.observable#toreportfromobjectoptions)›): *Promise‹Readonly‹[Report](../classes/report_toolkit_common.report.report)››*

Convert a plain object (usually parsed from a JSON report generated by See [process.report.writeReport](https://nodejs.org/api/process.html#process_process_report_writereport_filename_err)) to a [Report](../classes/report_toolkit_common.report.report.mdx) instance.

Example:

```js
const {toReportFromObject} = require('@report-toolkit/core');

const json = fs.readFileSync('./report-xxxxx.json');
// `Report` instance with secrets redacted
const report = await toReportFromObject(json, {
  showSecretsUnsafe: false
});
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`value` | any | Raw report |
`opts?` | Partial‹[ToReportFromObjectOptions](report_toolkit_core.observable#toreportfromobjectoptions)› | - |

**Returns:** *Promise‹Readonly‹[Report](../classes/report_toolkit_common.report.report)››*

___

### transform

▸ **transform**(`transformerIds`: string | string[], `source`: any, `config?`: Partial‹any›, `options?`: Partial‹[TransformOptions](report_toolkit_core.observable#transformoptions)›): *Promise‹any[]›*

Run `source` through chain of one or more transformers.  Performs validation before piping.
If the final transformer does not output the desired `endType`, the `defaultTransformer` will be appended to the chain; otherwise it is ignored.

Example:

```js
const {transform, toReportFromObject} = require('@report-toolkit/core');

// by default, `report` has its secrets redacted
const report = await toReportFromObject(process.report.getReport());
const [header, ...data] = await transform(['filter', 'csv'], report, {
  transformers: {
    filter: {include: 'header'},
    csv: {flatten: true}
  }
});
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`transformerIds` | string &#124; string[] | Unique transformer identifier(s), in order.  Can be one of `csv`, `filter`, `json`, `newline`, `numeric`, `redact`, `stack-hash`, `table`. |
`source` | any | Source, typically one or more [Reports](../classes/report_toolkit_common.report.report.mdx). |
`config?` | Partial‹any› | As returned by [loadConfig](report_toolkit_core.mdx#loadconfig); can contain transformer-specific settings. |
`options?` | Partial‹[TransformOptions](report_toolkit_core.observable#transformoptions)› | Optional constraints & default behavior; overrides settings in `config`, if present.  |

**Returns:** *Promise‹any[]›*

___

### use

▸ **use**(`pluginId`: string): *Promise‹[RTKPlugin](report_toolkit_core.observable#rtkplugin)›*

Register & enable a plugin.

Example:

```js
const {use} = require('@report-toolkit/core');

await use('some-plugin-in-node_modules');
await use('./relative/path/to/plugin.js');
```

**Parameters:**

Name | Type | Description |
------ | ------ | ------ |
`pluginId` | string | ID of plugin to register; a resolvable path to a module |

**Returns:** *Promise‹[RTKPlugin](report_toolkit_core.observable#rtkplugin)›*

